<script type="text/javascript" src='http://maps.googleapis.com/maps/api/js?sensor=true'></script>

	<div id="find-ballot" class="ballot-section">
			<h1 class="sectionheading"><%= t("front.look_ballot")%></h1>

		<div id="enter-address">

			<div>
				<input mnkeypress="$('.place-holder').hide()" data-bind="value: address" spellcheck="false" type="text" class="find-ballot" placeholder="<%= t('front.address_placeholder') %>">
				<!--[if IE]><label onclick="$('.find-ballot').focus()" unselectable="on" class="place-holder" style="display: none;" data-bind="visible: address() != null && address().length == 0"><%= t('front.address_placeholder') %></label><![endif]-->
				<a href="#" class="cancel find-ballot-submit"><%= t('site.submit')%></a>
			</div>
			<span class="remember link " data-bind="click: function( $data ) {  var member = $data.remember(); $data.remember( !member ); }, css: { on: remember }"  ><%= t('front.save_address') %></span>

		</div><!-- enter address -->

		<div id="map"  data-bind="css: { noGuides: true || guides().length < 1 && geolocated() }">
			<img data-bind="attr: { 'src' : map }, css: { located: geolocated() }" >
			<div style="display:none" class="top-guides" data-bind=" visible: geolocated() ">
				<h3>Voter Guides Near You</h3>
				<ol data-bind="foreach:guides">
					<li>
						<a data-bind="attr:{href: profile}, text: ( guide_name || name+'\'s Voter Guide' ).capitalize() "></a>
					</li>
				</ol>
				<em data-bind="visible: guides().length < 0">Loading...</em>
			</div>
			<div class="polling-place" data-bind="html: pollingLocation"></div>
			<div style="display:none;" class="confirmation" >
				<%= t("front.confirm") %><br />
				<a href="#read-ballot" class="fixed-link confirm"><%= t('site.yes') %></a><a href="" class="cancel clear"><%= t('site.no') %></a>
			</div>
		</div><!-- map -->

	</div><!-- find-ballot -->


	<div id="read-ballot" style="display:none"  class="ballot-section" data-bind="visible: choices.notEmpty() " >
		<h1 class="sectionheading"><%= t('front.on_ballot') %></h1>

		<!-- ko foreach: sections -->
			<div data-bind="visible: $data.visible, attr: {'class' : $data.className, 'id': $data.title.replace(/ /g,'_') }">
				<div class="category-heading" >
					<h2 data-bind="text: title"></h2>
					<p data-bind="text: description"></p>
				</div>
				<div class="candidates" data-bind="template: { name: $data.template, foreach: $data.contests }"></div>
			</div>
		<!-- /ko -->

	</div><!-- read-ballot -->
	<h1 class="sectionheading" style="display:none; clear: both;" data-bind="visible: !fetch() "><%= t('site.loading') %></h1>
	<div id="more-coming" style="display:none;" class="ballot-section" data-bind="visible: geolocated() && fetch()" >
		<%= render  'choice/missing', :visible => 'choices().length == 0' %>
		<div class="category-heading minor" data-bind="visible: choices().length > 0">
			<h1>There May Be More Data</h1>
			<p>There may be more data <%= t('site.for') %> <span data-bind="text: yourLocation.constructor.prototype.states[ yourLocation.constructor.prototype.abvs.indexOf( address.state() ) ] "></span> - we are limited in how deep we can perform matches on addresses (State Legislatures on up)</p>
			<p>Visit <a data-bind="text: yourLocation.constructor.prototype.states[ yourLocation.constructor.prototype.abvs.indexOf( address.state() ) ]+'\'s State Page', attr: { href: '/'+address.state() } "></a> for a full list</p>
			<p style="margin-top: 20px;"><%= t('add_form.missing' )%></p>
		</div>

	</div>


<script id="measure" type="text/html">
	<%=  render 'choice/measure/front' %>
</script>
<script id="candidate" type="text/html">
	<%=  render 'choice/candidate/front' %>
</script>
